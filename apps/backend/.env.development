# Environment variables declared in this file are automatically made available to Prisma.
# See the documentation for more detail: https://pris.ly/d/prisma-schema#accessing-environment-variables-from-the-schema

# Prisma supports the native connection string format for PostgreSQL, MySQL, SQLite, SQL Server, MongoDB and CockroachDB.
# See the documentation for all the connection string options: https://pris.ly/d/connection-strings

# DATABASE_URL="postgresql://postgres:Luo112781@132.232.160.223:5432/postgres?schema=public"
# SUPABASE_URL='http://132.232.160.223:8000'
# SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlIiwiaWF0IjoxNzQ1MDc4NDAwLCJleHAiOjE5MDI4NDQ4MDB9.SWzdf3ssLEGCazPYHlRZlGhixM1LAzVLFv3FXo6cx3w
# SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaXNzIjoic3VwYWJhc2UiLCJpYXQiOjE3NDUwNzg0MDAsImV4cCI6MTkwMjg0NDgwMH0.7gb1UrcBXzEidOKPhBviZVErQ6KW4rb2CGO-INiHHRA



############################################################
# üåç BASIC APP SETTINGS
############################################################

# development | production | test
NODE_ENV=development
DEBUG=true

# Backend server port
PORT=8102



############################################################
# üöá TBM ENGINE CORE
############################################################

# TBM Engine parameters
TBM_ENGINE_LOG_LEVEL=info
TBM_HISTORY_WINDOW_SECONDS=600    # 10 minutes window for spike & delta
TBM_SPIKE_MULTIPLIER=4            # spike threshold multiplier
TBM_DELTA_INTERVAL_SECONDS=30     # realdata interval (default 30s)



############################################################
# üîå MQTT CONFIGURATION
############################################################

# Your primary MQTT broker for TBM & Heartbeat
MQTT_BROKER_URL="mqtt://127.0.0.1"

# Optional MQTT auth
MQTT_USERNAME="tbm_engine"
MQTT_PASSWORD="Luo112781"
MQTT_CLIENT_ID="tbm_engine_client"

# MQTT connection settings (optional)
MQTT_RECONNECT_MS=2000
MQTT_KEEPALIVE_SECONDS=60



############################################################
# üóÑ DATABASE CONFIG
############################################################

# Primary PostgreSQL / Supabase DB
DATABASE_URL="postgresql://postgres:password@localhost:5432/postgres"

# Enable SSL for production environments
DATABASE_SSL=false



############################################################
# üü¶ SUPABASE CONFIG
############################################################

# Supabase URL (optional if connecting directly)
SUPABASE_URL='http://127.0.0.1:8000'
SUPABASE_SERVICE_ROLE_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlIiwiaWF0IjoxNzQ1MDc4NDAwLCJleHAiOjE5MDI4NDQ4MDB9.SWzdf3ssLEGCazPYHlRZlGhixM1LAzVLFv3FXo6cx3w'
SUPABASE_ANON_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoic2VydmljZV9yb2xlIiwiaXNzIjoic3VwYWJhc2UiLCJpYXQiOjE3NDUwNzg0MDAsImV4cCI6MTkwMjg0NDgwMH0.7gb1UrcBXzEidOKPhBviZVErQ6KW4rb2CGO-INiHHRA'

# Realtime channel enable/disable
SUPABASE_ENABLE_REALTIME=true




############################################################
# üì° WECHAT / SMS NOTIFICATION CONFIG
############################################################

# ‰ºÅ‰∏öÂæÆ‰ø° Webhook or APP credentials
WECHAT_WEBHOOK_URL='https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=28c87c35-b024-46ac-8bc8-7344a90aceb9'
WECHAT_CORP_ID=
WECHAT_CORP_SECRET=
WECHAT_AGENT_ID=

# SMS Notification Service (Aliyun or other)
SMS_ACCESS_KEY_ID=
SMS_ACCESS_KEY_SECRET=
SMS_SIGN_NAME=
SMS_TEMPLATE_CODE=




############################################################
# üì® EMAIL NOTIFICATION (optional)
############################################################

SMTP_HOST=
SMTP_PORT=
SMTP_USERNAME=
SMTP_PASSWORD=
EMAIL_FROM=notify@example.com



############################################################
# üîî ALERT / EVENT CONFIG
############################################################

# Threshold event dedupe window (seconds)
ALERT_DEDUPE_WINDOW=120

# How long before alert auto-resolved (seconds)
ALERT_AUTO_RESOLVE_SECONDS=600




############################################################
# üîÑ REDIS (optional but recommended for dedupe, cache, queue)
############################################################

REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=



############################################################
# üåê HTTP SERVICES / EXTERNAL APIs
############################################################

EXTERNAL_API_BASE_URL=
EXTERNAL_API_TOKEN=



############################################################
# üìÅ FILE STORAGE
############################################################

FILE_STORAGE_PATH="storage/"
ENABLE_FILE_UPLOAD=true




############################################################
# üß™ DEVELOPMENT SETTINGS
############################################################

LOGGING_VERBOSE=true
MOCK_MQTT_ENABLED=false
MOCK_SUPABASE_ENABLED=false




############################################################
# üè≠ PRODUCTION SETTINGS
############################################################

# Set to true for production performance mode
PRODUCTION_HARDENING=false
